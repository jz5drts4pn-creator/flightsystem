{% extends 'base.html' %}

{% block title %}Welcome{% endblock %}

{% block content %}

<!-- Hero Section -->
<div class="relative w-full h-64 bg-night-city overflow-hidden rounded-lg shadow-lg">
    <img src="/static/images/plane.svg" class="plane absolute top-10 left-[-100px]" />
</div>
<!DOCTYPE html>
<html>
<head>
    <title>Juba Airlines Home</title>
</head>
<body>
    <h1>Welcome Juba Airlines! ðŸš€</h1>
    <p>Your Django website is live on Render.</p>
</body>
</html>

<!-- Welcome Text & Stats -->
<div class="mt-6 text-center">
    <h1 class="text-3xl font-bold">Welcome to Juba Airlines</h1>
    <p class="text-gray-700 mt-2">Plan your next journey with Juba Airlines</p>

    <div class="flex justify-center mt-6 space-x-10">
        <div class="bg-white p-4 rounded-lg shadow-lg w-48">
            <h2 class="text-xl font-bold">Total Flights</h2>
            <p class="text-2xl font-bold">{{ total_flights }}</p>
        </div>
        <div class="bg-white p-4 rounded-lg shadow-lg w-48">
            <h2 class="text-xl font-bold">Your Bookings</h2>
            <p class="text-2xl font-bold">{{ total_bookings }}</p>
        </div>
    </div>
</div>
<!-- Popular Routes Chart -->
<div class="mt-10 bg-white p-6 rounded-lg shadow-lg">
    <h2 class="text-xl font-bold mb-4">Top 5 Popular Routes</h2>
    <canvas id="routesChart" width="400" height="150"></canvas>
</div>

<script>
const ctx = document.getElementById('routesChart').getContext('2d');
const routesChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: {{ route_labels|safe }},
        datasets: [{
            label: 'Bookings',
            data: {{ route_counts|safe }},
            backgroundColor: 'rgba(59, 130, 246, 0.7)',
            borderColor: 'rgba(59, 130, 246, 1)',
            borderWidth: 1
        }]
    },
    options: {
        responsive: true,
        scales: {
            y: { beginAtZero: true }
        }
    }
});
</script>

<!-- Advanced Flight Search -->
<div class="mt-10 bg-white p-6 rounded-lg shadow-lg">
    <h2 class="text-xl font-bold mb-4">Search Flights</h2>
    <form method="get" action="{% url 'flight_list' %}" class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <input type="text" name="departure" placeholder="Departure Airport" class="border p-2 rounded">
        <input type="text" name="arrival" placeholder="Arrival Airport" class="border p-2 rounded">
        <input type="date" name="departure_date" class="border p-2 rounded">
        <input type="date" name="arrival_date" class="border p-2 rounded">
        <button type="submit" class="bg-blue-900 text-white p-2 rounded col-span-1 md:col-span-4">Search Flights</button>
    </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

{% endblock %}
